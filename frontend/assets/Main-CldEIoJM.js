import{aL as J,F as K,r as b,G as Z,j as e,f as v,ao as k,ap as F,at as w,ar as m,as as a,an as P,C as R,ad as U,ae as X,a3 as Y,af as Q,a5 as ee,R as p,e as f,aq as $,aV as I,aS as L,h as g,I as y,aW as B,aX as E,aY as O,aZ as z,b as te,a_ as ne,a$ as W,i as se,a0 as re,w as le,x as ie,s as ae,b0 as oe,aF as ce,aG as G,A as de,T as xe,a8 as he,aD as ue,n as je,ag as pe,ah as A}from"./vendor-CY4U35Sj.js";import{t as H,a as me}from"./th-DMVESbt-.js";function fe(n,t){const l=J(H,H.objects.data);if(t&&t!=="all"){const s=l.features.filter(i=>{var r;return((r=i.properties)==null?void 0:r.ADM1_TH)===t});return{...l,features:s}}if(n&&n!=="all"){const s=l.features.filter(i=>{var r;return((r=i.properties)==null?void 0:r.REGION4)===n});return{...l,features:s}}return me}function be(n,t,l){const s=K();b.useEffect(()=>{if((!t||t==="all")&&(!l||l==="all")){s.setView([13,101.5],6);return}if(!n)return;const r=Z.geoJSON(n).getBounds();r.isValid()&&s.fitBounds(r,{padding:[20,20],maxZoom:l!=="all"?10:8,animate:!0})},[n,t,l,s])}const ge=[{label:"ฝนตกหนักมาก (> 250 มม.)",color:"#7B0072"},{label:"ฝนตกหนัก (125 – 250 มม.)",color:"#F00000"},{label:"ฝนตกค่อนหนัก (65 – 125 มม.)",color:"#F49500"},{label:"ฝนตกปานกลาง (35 – 65 มม.)",color:"#E9E700"},{label:"ฝนตกเล็กน้อย (10 – 35 มม.)",color:"#C4F5C9"},{label:"ฝนประปราย (0.1 – 10 มม.)",color:"#F4F4F4"},{label:"ไม่มีฝน",color:"#9e9e9e"}],_e=[{label:"อากาศหนาวจัด (≤ 7.9 °C)",color:"#0041FF"},{label:"อากาศหนาว (8.0 – 15.9 °C)",color:"#1565c0"},{label:"อากาศเย็น (16.0 – 29.9 °C)",color:"#81d4fa"},{label:"อากาศปกติ (30.0 – 34.9 °C)",color:"#ffeb3b"},{label:"อากาศร้อน (35.0 – 39.9 °C)",color:"#ff9800"},{label:"อากาศร้อนจัด (≥ 40.0 °C)",color:"#d32f2f"},{label:"ไม่มีข้อมูล",color:"#9e9e9e"}];function ye(n){return n==="rain"?ge:n==="temp"?_e:[]}function Ce({metric:n}){const t=ye(n),l=[];for(let s=0;s<t.length;s+=2)l.push(t.slice(s,s+2));return e.jsxs(e.Fragment,{children:[e.jsxs(v,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:["เกณฑ์",n==="rain"?"ปริมาณฝน":"อุณหภูมิ"]}),e.jsx(k,{children:e.jsx(F,{size:"small",sx:{"& td":{padding:"4px 8px",verticalAlign:"middle"}},children:e.jsx(w,{children:l.map((s,i)=>e.jsxs(m,{children:[s.flatMap((r,x)=>[e.jsx(a,{sx:{width:24,textAlign:"center",paddingRight:0},children:e.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",backgroundColor:r.color,border:"1px solid #666"}})},`color-${i}-${x}`),e.jsx(a,{sx:{whiteSpace:"nowrap",paddingLeft:4},children:e.jsx(v,{variant:"body2",children:r.label})},`label-${i}-${x}`)]),s.length===1&&e.jsxs(e.Fragment,{children:[e.jsx(a,{}),e.jsx(a,{})]})]},i))})})})]})}function ve({data:n,areaGeo:t,region:l,province:s,metric:i}){return be(t,l,s),e.jsxs(e.Fragment,{children:[e.jsx(Y,{data:t,style:{color:"#333",weight:2,fill:!1}},`${l}-${s}`),n.map(r=>{const x=i==="temp"?r.tempMeta:r.rainMeta,{color:h,label:d}=x;return e.jsx(Q,{center:[r.station_lat,r.station_lon],radius:7,pathOptions:{fillColor:h,fillOpacity:.85,stroke:!0,color:"#5b5a5a",weight:1},children:e.jsxs(ee,{children:[e.jsx("strong",{children:r.station_name_th}),e.jsx("br",{}),"จังหวัด: ",r.province_name_th,i==="rain"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"ฝนวันนี้: ",r.precip_today??"-"," มม."]}),i==="temp"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"อุณหภูมิ: ",r.temperature??"-"," °C"]}),e.jsx("br",{}),"สถานะ: ",d]})},r.station_id)})]})}function Te({data:n,loading:t,error:l,region:s,province:i,metric:r}){const x=b.useMemo(()=>fe(s,i),[s,i]);return t?e.jsx(P,{sx:{height:600,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(R,{})}):l?e.jsx(P,{sx:{height:600,p:2},children:e.jsx(v,{color:"error",children:"โหลดข้อมูลแผนที่ไม่สำเร็จ"})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{sx:{height:750,overflow:"hidden",mb:1},children:e.jsxs(U,{center:[13,101.5],zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(X,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(ve,{data:n,areaGeo:x,region:s,province:i,metric:r})]})}),e.jsx(P,{sx:{p:1,mb:{xs:0,md:2}},children:e.jsx(Ce,{metric:r})})]})}function Me({count:n,page:t,rowsPerPage:l,onPageChange:s}){const i=Math.max(0,Math.ceil(n/l)-1);return e.jsxs(f,{sx:{flexShrink:0,ml:2},children:[e.jsx(g,{title:"ไปหน้าแรก",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,0),disabled:t===0,children:e.jsx(B,{})})})}),e.jsx(g,{title:"หน้าก่อนหน้า",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t-1),disabled:t===0,children:e.jsx(E,{})})})}),e.jsx(g,{title:"หน้าถัดไป",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t+1),disabled:t>=i,children:e.jsx(O,{})})})}),e.jsx(g,{title:"ไปหน้าสุดท้าย",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,i),disabled:t>=i,children:e.jsx(z,{})})})})]})}function N(n,t,l){const s=n[l]??0;return(t[l]??0)-s}function Se(n,t){return n==="desc"?(l,s)=>N(l,s,t):(l,s)=>-N(l,s,t)}function Pe({data:n,loading:t,error:l}){const[s,i]=p.useState(0),[r,x]=p.useState(10),[h,d]=p.useState("desc"),[u,c]=p.useState("precip_today"),_=p.useMemo(()=>[...n].sort(Se(h,u)),[n,h,u]),T=Math.max(0,Math.ceil(n.length/r)-1),S=Math.min(s,T);return p.useEffect(()=>{i(0)},[n.length,r]),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(k,{sx:{flex:1},children:e.jsxs(F,{children:[e.jsx($,{children:e.jsxs(m,{children:[e.jsx(a,{children:"สถานี"}),e.jsx(a,{children:"ภาค"}),e.jsx(a,{children:"จังหวัด"}),e.jsx(a,{children:"เวลา"}),e.jsx(a,{align:"right",children:e.jsx(I,{hideSortIcon:!0,active:u==="precip_today",direction:u==="precip_today"?h:"asc",onClick:()=>{d(u==="precip_today"&&h==="asc"?"desc":"asc"),c("precip_today")},sx:{"& .MuiTableSortLabel-icon":{display:"none"},"&:hover .MuiTableSortLabel-icon":{display:"inline-flex"}},children:"ฝนสะสม (มม.)"})})]})}),e.jsxs(w,{children:[t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(f,{sx:{py:4},children:e.jsx(R,{size:28})})})}),l&&!t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"error",children:"โหลดข้อมูลไม่สำเร็จ"})})}),!t&&!l&&_.length===0&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"text.secondary",children:"ไม่มีข้อมูล"})})}),!t&&!l&&_.slice(s*r,s*r+r).map(o=>e.jsxs(m,{hover:!0,children:[e.jsx(a,{children:o.station_name_th}),e.jsx(a,{children:o.region_name_th}),e.jsx(a,{children:o.province_name_th}),e.jsx(a,{children:o.observed_time_th}),e.jsx(a,{align:"right",children:e.jsx(f,{component:"span",sx:{display:"inline-block",px:1.2,py:.4,borderRadius:1,backgroundColor:o.rainMeta.color,color:o.precip_today>35?"#000":"#333",fontWeight:500,minWidth:64,textAlign:"center"},children:o.precip_today??"ไม่ได้รับรายงาน"})})]},o.station_id))]})]})}),e.jsx(L,{component:"div",rowsPerPageOptions:[5,10,20],count:n.length,rowsPerPage:r,page:S,onPageChange:(o,C)=>i(C),onRowsPerPageChange:o=>{x(parseInt(o.target.value,10)),i(0)},labelRowsPerPage:"แถว",labelDisplayedRows:({from:o,to:C,count:j})=>`${o}–${C} จาก ${j}`,ActionsComponent:Me})]})}function ke({count:n,page:t,rowsPerPage:l,onPageChange:s}){const i=Math.max(0,Math.ceil(n/l)-1);return e.jsxs(f,{sx:{flexShrink:0,ml:2},children:[e.jsx(g,{title:"ไปหน้าแรก",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,0),disabled:t===0,children:e.jsx(B,{})})})}),e.jsx(g,{title:"หน้าก่อนหน้า",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t-1),disabled:t===0,children:e.jsx(E,{})})})}),e.jsx(g,{title:"หน้าถัดไป",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t+1),disabled:t>=i,children:e.jsx(O,{})})})}),e.jsx(g,{title:"ไปหน้าสุดท้าย",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,i),disabled:t>=i,children:e.jsx(z,{})})})})]})}function V(n,t,l){const s=n[l]??0;return(t[l]??0)-s}function Fe(n,t){return n==="desc"?(l,s)=>V(l,s,t):(l,s)=>-V(l,s,t)}function we({data:n,loading:t,error:l}){const[s,i]=p.useState(0),[r,x]=p.useState(10),[h,d]=p.useState("desc"),[u,c]=p.useState("temperature"),_=p.useMemo(()=>[...n].sort(Fe(h,u)),[n,h,u]),T=Math.max(0,Math.ceil(n.length/r)-1),S=Math.min(s,T);return p.useEffect(()=>{i(0)},[n.length,r]),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(k,{sx:{flex:1},children:e.jsxs(F,{children:[e.jsx($,{children:e.jsxs(m,{children:[e.jsx(a,{children:"สถานี"}),e.jsx(a,{children:"ภาค"}),e.jsx(a,{children:"จังหวัด"}),e.jsx(a,{children:"เวลา"}),e.jsx(a,{align:"right",children:e.jsx(I,{hideSortIcon:!0,active:u==="temperature",direction:u==="temperature"?h:"asc",onClick:()=>{d(u==="temperature"&&h==="asc"?"desc":"asc"),c("temperature")},sx:{"& .MuiTableSortLabel-icon":{display:"none"},"&:hover .MuiTableSortLabel-icon":{display:"inline-flex"}},children:"อุณหภูมิ (C°)"})})]})}),e.jsxs(w,{children:[t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(f,{sx:{py:4},children:e.jsx(R,{size:28})})})}),l&&!t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"error",children:"โหลดข้อมูลไม่สำเร็จ"})})}),!t&&!l&&_.length===0&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"text.secondary",children:"ไม่มีข้อมูล"})})}),!t&&!l&&_.slice(s*r,s*r+r).map(o=>e.jsxs(m,{hover:!0,children:[e.jsx(a,{children:o.station_name_th}),e.jsx(a,{children:o.region_name_th}),e.jsx(a,{children:o.province_name_th}),e.jsx(a,{children:o.observed_time_th}),e.jsx(a,{align:"right",children:e.jsx(f,{component:"span",sx:{display:"inline-block",px:1.2,py:.4,borderRadius:1,backgroundColor:o.tempMeta.color,color:o.temperature>35?"#000":"#333",fontWeight:500,minWidth:64,textAlign:"center"},children:o.temperature??"ไม่ได้รับรายงาน"})})]},o.station_id))]})]})}),e.jsx(L,{component:"div",rowsPerPageOptions:[5,10,20],count:n.length,rowsPerPage:r,page:S,onPageChange:(o,C)=>i(C),onRowsPerPageChange:o=>{x(parseInt(o.target.value,10)),i(0)},labelRowsPerPage:"แถว",labelDisplayedRows:({from:o,to:C,count:j})=>`${o}–${C} จาก ${j}`,ActionsComponent:ke})]})}function Re({count:n,page:t,rowsPerPage:l,onPageChange:s}){const i=Math.max(0,Math.ceil(n/l)-1);return e.jsxs(f,{sx:{flexShrink:0,ml:2},children:[e.jsx(g,{title:"ไปหน้าแรก",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,0),disabled:t===0,children:e.jsx(B,{})})})}),e.jsx(g,{title:"หน้าก่อนหน้า",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t-1),disabled:t===0,children:e.jsx(E,{})})})}),e.jsx(g,{title:"หน้าถัดไป",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,t+1),disabled:t>=i,children:e.jsx(O,{})})})}),e.jsx(g,{title:"ไปหน้าสุดท้าย",children:e.jsx("span",{children:e.jsx(y,{onClick:r=>s(r,i),disabled:t>=i,children:e.jsx(z,{})})})})]})}function Ae(n,t,l){const s=l==="max"?n.temperature_max_today:n.temperature_min_today,i=l==="max"?t.temperature_max_today:t.temperature_min_today;return s==null&&i==null?0:s==null?1:i==null?-1:l==="max"?i-s:s-i}function De({data:n,loading:t,error:l}){const[s,i]=p.useState(0),[r,x]=p.useState(10),[h,d]=p.useState("max"),u=p.useMemo(()=>[...n].sort((c,_)=>Ae(c,_,h)),[n,h]);return p.useEffect(()=>{i(0)},[n.length,r]),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(k,{sx:{flex:1},children:e.jsxs(F,{children:[e.jsx($,{children:e.jsxs(m,{children:[e.jsx(a,{children:"สถานี"}),e.jsx(a,{children:"ภาค"}),e.jsx(a,{children:"จังหวัด"}),e.jsx(a,{children:"เวลา"}),e.jsx(a,{align:"center",children:e.jsxs(I,{active:!0,direction:h==="max"?"desc":"asc",onClick:()=>{d(c=>c==="max"?"min":"max")},sx:{display:"inline-flex",flexDirection:"row-reverse",gap:.5},children:["อุณหภูมิ",h==="max"?"สูงสุด":"ต่ำสุด"," (°C)"]})})]})}),e.jsxs(w,{children:[t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(f,{sx:{py:4},children:e.jsx(R,{size:28})})})}),l&&!t&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"error",children:"โหลดข้อมูลไม่สำเร็จ"})})}),!t&&!l&&u.length===0&&e.jsx(m,{children:e.jsx(a,{colSpan:5,align:"center",children:e.jsx(v,{color:"text.secondary",children:"ไม่มีข้อมูล"})})}),!t&&!l&&u.slice(s*r,s*r+r).map(c=>e.jsxs(m,{hover:!0,children:[e.jsx(a,{children:c.station_name_th}),e.jsx(a,{children:c.region_name_th}),e.jsx(a,{children:c.province_name_th}),e.jsx(a,{children:c.observed_time_th}),e.jsx(a,{align:"center",children:e.jsx(f,{sx:{fontWeight:600,color:h==="max"?c.temperature_max_today!=null?"#c62828":"text.disabled":c.temperature_min_today!=null?"#1565c0":"text.disabled"},children:h==="max"?c.temperature_max_today??"-":c.temperature_min_today??"-"})})]},c.station_id))]})]})}),e.jsx(L,{component:"div",rowsPerPageOptions:[5,10,20],count:u.length,rowsPerPage:r,page:s,onPageChange:(c,_)=>i(_),onRowsPerPageChange:c=>{x(parseInt(c.target.value,10)),i(0)},labelRowsPerPage:"แถว",labelDisplayedRows:({from:c,to:_,count:T})=>`${c}–${_} จาก ${T}`,ActionsComponent:Re})]})}function D(n){const{children:t,value:l,index:s,...i}=n;return e.jsx("div",{hidden:l!==s,...i,children:l===s&&e.jsx(P,{elevation:0,sx:{height:"100%",mb:2,display:"flex",flexDirection:"column",overflow:"hidden",border:"1px solid #e0e0e0",borderRadius:"0 8px 8px 8px"},children:t})})}const $e=ae(({className:n,...t})=>e.jsx(g,{...t,classes:{popper:n}}))({[`& .${oe.tooltip}`]:{fontSize:"0.8rem"}});function Ie({data:n,loading:t,error:l,metric:s,onMetricChange:i}){const r=te(),[x,h]=b.useState(0),d={rain:[{key:"r1",label:"ฝนวันนี้",tooltip:"ปริมาณฝนสะสมตั้งแต่เวลา 7.00 น. ของวันนี้ จนถึงเวลาปัจจุบันของวันนี้"}],temp:[{key:"t1",label:"อุณหภูมิปัจจุบัน",tooltip:"ข้อมูลอุณหภูมิ ณ เวลาปัจจุบัน"},{key:"t2",label:"อุณหภูมิสูงสุด / อุณหภูมิต่ำสุด",tooltip:"ข้อมูลอุณหภูมิสูงสุด / อุณหภูมิต่ำสุด"}]};return b.useEffect(()=>{h(0)},[s]),e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{display:"flex",justifyContent:"flex-end",mb:1.5},children:e.jsxs(ne,{value:s,exclusive:!0,size:"small",onChange:(u,c)=>c&&i(c),sx:{gap:1,"& .MuiToggleButton-root":{px:1.5,py:.5,minWidth:"auto",border:"1px solid #d0d4d9",borderRadius:"999px",textTransform:"none",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",gap:.5},"& .MuiToggleButton-root.Mui-selected":{backgroundColor:"primary.main",color:"#fff",borderColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}}},children:[e.jsxs(W,{value:"rain",children:[e.jsx(se,{fontSize:"small"}),"ฝน"]}),e.jsxs(W,{value:"temp",children:[e.jsx(re,{fontSize:"small"}),"อุณหภูมิ"]})]})}),e.jsx(f,{sx:{display:"inline-flex",bgcolor:"#f5f5f5",border:"1px solid #e0e0e0",borderBottom:"none",borderRadius:"8px 8px 0 0"},children:e.jsx(le,{value:x,onChange:(u,c)=>h(c),variant:"scrollable",scrollButtons:!1,sx:{minHeight:40,"& .MuiTab-root":{minHeight:40,px:3,minWidth:"auto",textTransform:"none"}},children:d[s].map(u=>e.jsx($e,{title:u.tooltip,children:e.jsx(ie,{label:u.label})},u.key))})}),e.jsxs(f,{sx:{flex:1,overflow:"hidden"},children:[s==="rain"&&e.jsx(e.Fragment,{children:e.jsx(D,{value:x,index:0,dir:r.direction,children:e.jsx(Pe,{data:n,loading:t,error:l})})}),s==="temp"&&e.jsxs(e.Fragment,{children:[e.jsx(D,{value:x,index:0,children:e.jsx(we,{data:n,loading:t,error:l})}),e.jsx(D,{value:x,index:1,children:e.jsx(De,{data:n,loading:t,error:l})})]})]})]})}function Le({region:n,province:t,regions:l,provinces:s,setRegion:i,setProvince:r,refresh:x,loading:h}){return e.jsxs(f,{sx:{display:"flex",gap:2,mb:2,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"}},children:[e.jsxs(ce,{size:"small",value:n,disabled:h,onChange:d=>{i(d.target.value),r("all")},sx:{width:{xs:"100%",sm:180}},children:[e.jsx(G,{value:"all",children:"ทั่วประเทศ"}),l.map(d=>e.jsx(G,{value:d,children:d},d))]}),e.jsx(de,{size:"small",disabled:h,options:["all",...s],value:t,onChange:(d,u)=>r(u??"all"),getOptionLabel:d=>d==="all"?"ทุกจังหวัด":d,renderInput:d=>e.jsx(xe,{...d,placeholder:"เลือกจังหวัด"}),isOptionEqualToValue:(d,u)=>d===u,sx:{width:{xs:"100%",sm:240}}}),e.jsx(g,{title:"รีเฟรชข้อมูล",children:e.jsx("span",{children:e.jsx(he,{variant:"outlined",startIcon:e.jsx(ue,{}),onClick:x,disabled:h,sx:{whiteSpace:"nowrap",alignSelf:{xs:"flex-end",sm:"center"}},children:"รีเฟรชข้อมูล"})})})]})}const Be=je.create({baseURL:"https://wxmap.tmd.go.th/api",timeout:15e3});function Ee(n){const t=n??0;return t>250?{color:"#7B0072",label:"ฝนตกหนักมาก"}:t>125?{color:"#F00000",label:"ฝนตกหนัก"}:t>65?{color:"#F49500",label:"ฝนตกค่อนหนัก"}:t>35?{color:"#E9E700",label:"ฝนตกปานกลาง"}:t>10?{color:"#C4F5C9",label:"ฝนตกเล็กน้อย"}:t>0?{color:"#F4F4F4",label:"ฝนประปราย"}:{color:"#9e9e9e",label:"ไม่มีฝน"}}function Oe(n){const t=n??null;return t===null?{color:"#9e9e9e",label:"ไม่มีข้อมูล"}:t>=40?{color:"#d32f2f",label:"อากาศร้อนจัด"}:t>=35?{color:"#ff9800",label:"อากาศร้อน"}:t>=30?{color:"#ffeb3b",label:"อากาศปกติ"}:t>=16?{color:"#81d4fa",label:"อากาศเย็น"}:t>=8?{color:"#1565c0",label:"อากาศหนาว"}:t<=7.9?{color:"#0041FF",label:"อากาศหนาวจัด"}:{color:"#9e9e9e",label:"ไม่มีข้อมูล"}}function ze(n){return n?new Intl.DateTimeFormat("th-TH",{hour:"2-digit",minute:"2-digit"}).format(new Date(n))+" น.":"-"}function We(){const[n,t]=b.useState([]),[l,s]=b.useState(!0),[i,r]=b.useState(null),[x,h]=b.useState("all"),[d,u]=b.useState("all"),[c,_]=b.useState("rain"),T=async()=>{var j;try{s(!0),r(null);const M=await Be.get("/awsnow");if(!((j=M.data)!=null&&j.success))throw new Error("API returned success = false");t(M.data.data||[])}catch(M){r(M)}finally{s(!1)}};b.useEffect(()=>{T()},[]);const S=b.useMemo(()=>n.filter(j=>{const M=x==="all"||j.region_name_th===x,q=d==="all"||j.province_name_th===d;return M&&q}).map(j=>({...j,rainMeta:Ee(j.precip_today),tempMeta:Oe(j.temperature),observed_time_th:ze(j.datetime_utc7)})),[n,x,d]),o=b.useMemo(()=>[...new Set(n.map(j=>j.region_name_th))],[n]),C=b.useMemo(()=>[...new Set(n.filter(j=>x==="all"||j.region_name_th===x).map(j=>j.province_name_th))],[n,x]);return{filteredData:S,regions:o,provinces:C,region:x,province:d,setRegion:h,setProvince:u,metric:c,setMetric:_,loading:l,error:i,refresh:T}}function Ne(){const n=We();return e.jsxs(pe,{maxWidth:"xl",sx:{height:"100vh",py:2},children:[e.jsx(Le,{...n}),e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{size:{xs:12,md:4},children:e.jsx(Te,{data:n.filteredData,loading:n.loading,error:n.error,region:n.region,province:n.province,metric:n.metric})}),e.jsx(A,{size:{xs:12,md:8},children:e.jsx(Ie,{data:n.filteredData,loading:n.loading,error:n.error,metric:n.metric,onMetricChange:n.setMetric})})]})]})}export{Ne as default};
