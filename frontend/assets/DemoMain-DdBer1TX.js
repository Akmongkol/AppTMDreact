import{j as t,e as b,an as v,f as m,ao as R,ap as C,aq as N,ar as c,as as i,at as E,au as $,l as x,av as A,aw as w,ax as L,y as k,r as u,ag as W,S as z,n as S}from"./vendor-CY4U35Sj.js";function O({rows:n}){return t.jsx(b,{sx:{display:"flex",justifyContent:"center",mt:2},children:t.jsxs(v,{sx:{width:"fit-content",p:2},elevation:3,children:[t.jsx(m,{variant:"h6",sx:{mb:1,textAlign:"center"},children:"รายงานสถานีอุตุนิยมวิทยาที่มีปริมาณฝนรายวันมากกว่า 35 มม."}),t.jsx(m,{variant:"subtitle1",color:"text.secondary",sx:{mb:2,textAlign:"center"},children:"ณ วันที่ 14 ธันวาคม 2568"}),t.jsx(R,{sx:{display:"flex",justifyContent:"center"},children:t.jsxs(C,{size:"small",sx:{width:"auto","& .MuiTableCell-root":{border:"1px solid rgba(224, 224, 224, 1)"}},children:[t.jsx(N,{children:t.jsxs(c,{children:[t.jsx(i,{sx:{fontWeight:"bold"},children:"สถานี"}),t.jsx(i,{align:"right",sx:{fontWeight:"bold"},children:"ฝน (มม.)"})]})}),t.jsx(E,{children:n.length===0?t.jsx(c,{children:t.jsx(i,{colSpan:3,align:"center",children:"ไม่มีสถานีที่ฝนเกิน 35 มม."})}):n.map(r=>t.jsxs(c,{children:[t.jsxs(i,{children:[r.stationName," (",r.stationId,")"]}),t.jsx(i,{align:"right",children:r.rainfall})]},r.stationId))})]})})]})})}const y={borderBottom:"1px solid #d0d4d9",borderRight:"1px solid #d0d4d9",verticalAlign:"top",whiteSpace:"nowrap",color:"#1f2328",padding:{xs:"8px 12px",sm:"12px 16px"},fontSize:{xs:"0.813rem",sm:"0.875rem"},"&:last-child":{borderRight:"none"}},T={backgroundColor:"#f4f6f8",fontWeight:600,color:"#2c2f33",borderBottom:"1.5px solid #b0b6bc",borderRight:"1px solid #d0d4d9",whiteSpace:"nowrap",padding:{xs:"10px 12px",sm:"12px 16px"},fontSize:{xs:"0.875rem",sm:"0.938rem"},"&:last-child":{borderRight:"none"}};function B({rows:n}){function r(a){const e=new Date(a);return e.setDate(e.getDate()+1),e.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}return t.jsx(b,{sx:{display:"flex",justifyContent:"center",p:{xs:1,sm:2}},children:t.jsxs(v,{elevation:2,sx:{width:"fit-content",maxWidth:"100%",minWidth:{xs:"95%",sm:"auto"},p:2},children:[t.jsx(m,{variant:"h6",sx:{textAlign:"center"},children:"ปริมาณฝน 24 ชม. ย้อนหลัง 7 วัน"}),t.jsx(b,{sx:{px:{xs:2,sm:3,md:4},py:{xs:2,sm:2.5,md:3},display:"flex",justifyContent:"center"},children:t.jsx(R,{sx:{width:"fit-content"},children:t.jsxs(C,{sx:{tableLayout:"auto",width:"auto",border:"1px solid #b0b6bc",borderCollapse:"collapse"},children:[t.jsx(N,{children:t.jsxs(c,{children:[t.jsx(i,{sx:T,children:"สถานี"}),t.jsx(i,{sx:T,align:"center",children:"ฝน 24 ชม. (มม.)"}),t.jsx(i,{sx:T,align:"center",children:"วันที่"})]})}),t.jsx(E,{children:n.length===0?t.jsx(c,{children:t.jsx(i,{colSpan:3,align:"center",children:"ไม่มีสถานีที่ฝนเกิน 35 มม."})}):n.map((a,e)=>{const l=e===0||n[e-1].stationId!==a.stationId;return t.jsxs(c,{hover:!0,sx:{borderTop:l?"2px solid #b0b6bc":"none","&:hover":{backgroundColor:"#f5f8fa"}},children:[t.jsxs(i,{sx:y,children:[t.jsx("strong",{children:a.stationName}),t.jsx("br",{}),t.jsxs(m,{variant:"caption",sx:{fontSize:{xs:"0.75rem",sm:"0.813rem"},color:"#586069"},children:["(",a.stationId,")"]})]}),t.jsx(i,{align:"center",sx:y,children:a.rainfall}),t.jsx(i,{align:"center",sx:y,children:r(a.recordTime)})]},`${a.stationId}-${a.recordTime}-${e}`)})})]})})})]})})}$(x);A(x);w(x);L(x);x.setOptions({time:{useUTC:!1}});function M({rows:n}){if(!(n!=null&&n.length))return null;const r=Object.values(n.reduce((e,l)=>{const o=l.stationId,p=Number(l.rainfall),d=new Date(l.recordTime);d.setDate(d.getDate()+1),d.setHours(0,0,0,0);const g=d.getTime();return e[o]||(e[o]={name:l.stationName,data:[]}),!Number.isNaN(g)&&!Number.isNaN(p)&&e[o].data.push([g,p]),e},{}));r.forEach(e=>{e.data.sort((l,o)=>l[0]-o[0])});const a={chart:{type:"line",zoomType:"x"},title:{text:"ปริมาณฝนย้อนหลัง 7 วัน"},xAxis:{type:"datetime",tickInterval:24*3600*1e3,title:{text:"วันที่"},labels:{formatter:function(){return new Date(this.value).toLocaleDateString("th-TH",{day:"numeric",month:"short"})}}},yAxis:{min:0,title:{text:"ปริมาณฝน (มม.)"}},legend:{enabled:!0,align:"center",verticalAlign:"bottom"},tooltip:{shared:!1,formatter:function(){return`
      <b>${new Date(this.x).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"})}</b><br/>
      <span style="color:${this.color}">●</span>
      ${this.series.name}: <b>${this.y} มม.</b>
    `}},plotOptions:{line:{marker:{enabled:!0},dataLabels:{enabled:!0,format:"{y} มม."}}},accessibility:{enabled:!0},exporting:{enabled:!0,fallbackToExportServer:!1},credits:{enabled:!1},series:r};return t.jsx(v,{sx:{p:1},children:t.jsx(k,{highcharts:x,options:a})})}function P(){const[n,r]=u.useState([]),[a,e]=u.useState([]),[l,o]=u.useState(!0);return u.useEffect(()=>{async function p(){try{const f=((await S.get("https://wxmap.tmd.go.th/api/raindaily",{params:{DateTime:"2025-12-13T17:00"}})).data.items||[]).filter(s=>s.rainfall!==null&&s.rainfall!==""&&s.rainfall>35).sort((s,h)=>h.rainfall-s.rainfall);if(r(f),f.length===0){e([]);return}const D={},j={};f.forEach((s,h)=>{D[s.stationId]=s.stationName,j[s.stationId]=h});const H=f.map(s=>s.stationId),I=((await S.get("https://wxmap.tmd.go.th/api/rain-7days",{params:{stationIds:H.join(",")}})).data.items||[]).map(s=>({...s,stationName:D[s.stationId]||"-"}));I.sort((s,h)=>j[s.stationId]-j[h.stationId]),e(I)}catch(d){console.error("โหลดข้อมูลไม่สำเร็จ",d)}finally{o(!1)}}p()},[]),l?t.jsx(b,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(m,{children:"กำลังโหลดข้อมูล..."})}):t.jsx(W,{maxWidth:!1,disableGutters:!0,sx:{minHeight:"100vh",px:{xs:1,sm:2,md:3},py:2},children:t.jsxs(z,{spacing:4,children:[t.jsx(O,{rows:n}),t.jsx(M,{rows:a}),t.jsx(B,{rows:a})]})})}export{P as default};
