import{r as i,j as t,ag as h,C as A,f as l,ah as f,K as F,e as x,ai as R,I as c,aj as D,a6 as T,p as B,q as E,t as G,v as $,ak as z,al as M,am as N,n as W}from"./vendor-CY4U35Sj.js";function L(){const[a,j]=i.useState(null),[y,k]=i.useState(!0),[n,d]=i.useState(null),[r,u]=i.useState(null);function g(e){if(!e||e.length!==8)return e;const s=parseInt(e.slice(0,4),10),o=parseInt(e.slice(4,6),10)-1;return`${parseInt(e.slice(6,8),10)} ${["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"][o]} ${s+543}`}if(i.useEffect(()=>{(async()=>{try{const s=await W.get("https://wxmap.tmd.go.th/api/imagerain");s.data.success?j(s.data.data):console.error("ไม่สามารถโหลดข้อมูลได้")}catch(s){console.error("เกิดข้อผิดพลาด:",s)}finally{k(!1)}})()},[]),y)return t.jsxs(h,{sx:{textAlign:"center",mt:5},children:[t.jsx(A,{}),t.jsx(l,{mt:2,children:"กำลังโหลดข้อมูล..."})]});if(!a)return t.jsx(h,{sx:{textAlign:"center",mt:5},children:t.jsx(l,{color:"error",children:"เกิดข้อผิดพลาดในการโหลดข้อมูล"})});const C=[{title:"Flash Flood Risk",key:"ffr"},{title:"Landslide Hazard Assessment",key:"lha"}],w=(e,s,o)=>{o!=null&&o.currentTarget&&o.currentTarget.blur(),u(e),d(s)},p=()=>{var e;d(null),u(null),(e=document.activeElement)==null||e.blur()},I=()=>{n>0&&d(e=>e-1)},v=()=>{const e=a[r];n<e.length-1&&d(s=>s+1)};return t.jsxs(h,{sx:{py:4},children:[t.jsx(l,{variant:"h4",gutterBottom:!0,textAlign:"center",children:"Flash Flood Risk for 12hr, 24hr, 36hr"}),C.map(e=>{const s=a[e.key];return!s||s.length===0?null:t.jsxs("div",{style:{marginTop:40},children:[t.jsx(l,{variant:"h5",gutterBottom:!0,children:e.title}),t.jsx(f,{container:!0,spacing:3,justifyContent:"center",children:s.map((o,m)=>t.jsx(f,{xs:12,sm:6,md:4,display:"flex",justifyContent:"center",children:t.jsxs(F,{sx:{width:300,borderRadius:2,boxShadow:3,overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsxs(x,{sx:{position:"relative",width:"100%"},children:[t.jsx(R,{component:"img",height:"240",image:o.path,alt:e.key,sx:{objectFit:"contain",width:"100%"}}),t.jsx(x,{sx:{position:"absolute",inset:0,"&:hover ~ .expand-btn, &:focus-within ~ .expand-btn":{opacity:1}}}),t.jsx(c,{className:"expand-btn",onClick:b=>w(e.key,m,b),sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255,255,255,0.85)",opacity:0,transition:"opacity 0.3s ease","&:hover, &:focus":{opacity:1,backgroundColor:"white"}},tabIndex:0,children:t.jsx(D,{sx:{fontSize:40,color:"black"}})})]}),t.jsx(T,{sx:{textAlign:"center",width:"100%"},children:t.jsxs(l,{variant:"body2",color:"text.secondary",children:["วันที่: ",g(o.date)]})})]})},o.path))})]},e.key)}),t.jsx(B,{open:n!==null,onClose:p,maxWidth:"lg",children:n!==null&&r&&t.jsxs(t.Fragment,{children:[t.jsxs(E,{sx:{textAlign:"center",fontWeight:"bold"},children:["วันที่: ",g(a[r][n].date)]}),t.jsx(c,{"aria-label":"close",onClick:p,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:t.jsx(G,{})}),t.jsxs($,{sx:{p:0,position:"relative"},children:[t.jsx(x,{component:"img",src:a[r][n].path,alt:"preview",sx:{maxWidth:"100%",maxHeight:"75vh",display:"block",margin:"auto",borderRadius:2}}),t.jsx(c,{onClick:()=>{const e=a[r][n].path;window.open(e,"_blank")},sx:{position:"absolute",top:5,right:20,zIndex:20,backgroundColor:"rgba(255,255,255,0.7)","&:hover":{backgroundColor:"white"}},children:t.jsx(z,{sx:{color:"black"}})}),t.jsx(c,{onClick:I,disabled:n===0,sx:{position:"absolute",top:"50%",left:10,transform:"translateY(-50%)",color:"white",backgroundColor:"rgba(0,0,0,0.4)","&:hover":{backgroundColor:"rgba(0,0,0,0.6)"}},children:t.jsx(M,{})}),t.jsx(c,{onClick:v,disabled:n===a[r].length-1,sx:{position:"absolute",top:"50%",right:10,transform:"translateY(-50%)",color:"white",backgroundColor:"rgba(0,0,0,0.4)","&:hover":{backgroundColor:"rgba(0,0,0,0.6)"}},children:t.jsx(N,{})})]})]})})]})}export{L as default};
